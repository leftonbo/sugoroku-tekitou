# すごろくインクリメンタルゲーム

すごろくをテーマにしたインクリメンタル・放置ブラウザゲームです。

## ゲーム概要

プレイヤーはサイコロを振ってすごろく盤面を進み、クレジット💰を獲得してアップグレードを購入し、より効率的にゲームを進めることができます。

## 主な機能

### 基本システム
- **手動ダイス**: 手動でサイコロを振って盤面を進む（複数個対応）
- **自動ダイス**: 6種類のダイス（4/6/8/10/12/20面）を自動化
- **動的盤面**: 100マス構成、レベルアップで盤面が再生成
- **クレジット獲得**: マス目に応じたクレジット💰を獲得
- **自動保存**: 30秒間隔 + ページ離脱時の自動保存

### アップグレードシステム
- **ダイス解禁**: 段階的にダイス種類を解禁（コスト：30〜12,000💰）
- **速度アップグレード**: 各ダイスの自動実行間隔を短縮（レベル1-20）
- **個数アップグレード**: アセンションによる同時実行個数増加
- **累積コストシステム**: 全アセンション累積レベルを考慮した価格計算
- **段階的価格**: 累乗による価格上昇システム

### プレステージシステム
- **プレステージポイント**: レベル50以降、指数関数的に獲得
- **転生**: ゲーム状態をリセットして新たな挑戦
- **永続アップグレード**: 4種類の永続強化（クレジット倍率、速度向上、ボーナス確率、ボーナス倍率）
- **統計記録**: 転生回数、最高記録、総獲得クレジット等

### 特殊システム
- **マス目効果**: クレジット、進む、戻るマスによる多様な効果
- **特殊ボーナスマス**: 1%確率で出現するボーナスクレジットマス（5倍獲得）
- **マス状態管理**: ボーナスマス使用後の状態変化とセーブ機能
- **負荷システム**: レベル200以降、高レベル時の調整機能
- **固定戻るマス**: レベル10以降、盤面後半に戦略的配置

## 技術仕様

- **言語**: TypeScript (ES6+ Modules)
- **乱数生成**: XorShift128高品質疑似乱数生成器
- **UI**: HTML5 + CSS3 + Bootstrap 5.3
- **データ保存**: LocalStorage API + SessionStorage (デバッグ用)
- **状態管理**: 差分保存による効率的なマス状態管理
- **ゲーム更新**: requestAnimationFrame による60fps更新
- **アーキテクチャ**: モジュラー設計、関心の分離、型安全性

## ファイル構成

```
sugoroku-tekitou/
├── index.html                    # メインHTMLファイル
├── assets/                       # 静的ファイル
│   ├── css/
│   │   └── style.css            # カスタムスタイル（アニメーション含む）
│   └── img/                     # 画像ファイル
├── src/                         # TypeScriptソースコード
│   ├── types/                   # TypeScript型定義
│   │   ├── game-state.ts        # ゲーム状態の型定義
│   │   └── constants.ts         # 設定値の型定義
│   ├── utils/                   # ユーティリティ
│   │   ├── constants.ts         # 定数・設定値
│   │   ├── math-utils.ts        # 数学・計算関数
│   │   └── xorshift-random.ts   # XorShift128乱数生成器
│   ├── data/                    # データ管理
│   │   ├── game-state.ts        # ゲーム状態管理
│   │   └── storage-manager.ts   # データ保存・復元
│   ├── systems/                 # ゲームシステム
│   │   ├── board-system.ts      # 盤面システム
│   │   ├── dice-system.ts       # ダイスシステム
│   │   ├── prestige-system.ts   # プレステージシステム
│   │   └── upgrade-system.ts    # アップグレードシステム
│   ├── ui/                      # UI層
│   │   ├── animation-manager.ts # アニメーション管理
│   │   └── ui-manager.ts        # UI管理・最適化
│   └── core/                    # メイン
│       ├── game.ts              # メインゲームクラス
│       └── game-loop.ts         # ゲームループ管理
├── dist/                        # コンパイル済みJavaScript (自動生成)
├── tsconfig.json                # TypeScript設定
├── package.json                 # 依存関係管理
├── CLAUDE.md                    # 開発ガイド
└── README.md                    # このファイル
```

## 開発状況

### 実装済み機能
- [x] **基本システム**: 100マス動的盤面、レベルシステム
- [x] **ダイスシステム**: 手動・自動ダイス（7種類）
- [x] **アップグレード**: 段階的解禁、速度・個数アップグレード
- [x] **プレステージ**: 転生、プレステージポイント、統計記録
- [x] **特殊マス**: クレジット、進む、戻るマス、ボーナスクレジットマス
- [x] **高品質乱数**: XorShift128による真のランダム盤面生成
- [x] **マス状態管理**: ボーナスマス使用後の状態保存・復元
- [x] **累積コストシステム**: 全アセンション投資を考慮した価格計算
- [x] **永続アップグレード**: 4種類のプレステージ強化
- [x] **負荷システム**: 高レベル時のゲームバランス調整
- [x] **UI最適化**: 部分更新、アニメーション最適化
- [x] **データ管理**: 自動保存、バックアップ、復元機能
- [x] **デバッグ機能**: ゲーム制御、データ管理（開発者向け）
- [x] **レスポンシブ**: モバイル対応UI

### 最近の改善
- [x] **XorShift128実装**: 高品質疑似乱数による完全ランダムな盤面生成
- [x] **特殊ボーナスマス**: 1%確率でボーナスクレジットマス、5倍獲得、状態管理
- [x] **プレステージ拡張**: ボーナス確率・倍率向上の永続アップグレード追加
- [x] **累積コスト計算**: 全アセンション累積レベルを考慮した公正な価格システム
- [x] **マス状態保存**: ボーナスマス使用後の状態を差分形式で効率保存
- [x] **TypeScript移行**: 完全な型安全性とコンパイル時エラー検出
- [x] **パフォーマンス**: UI更新の最適化、HTML再生成の削減
- [x] **デバッグ支援**: 一時停止、1Tick進行、セーブ削除機能
- [x] **ゲームバランス**: 戻るマス最大値拡張、負荷システム改良
- [x] **モジュラー設計**: 関心の分離、保守性向上、型定義による明確なインターフェース

### 将来実装予定
- [ ] 実績システム（マイルストーン）
- [ ] 特殊イベントマス（ワープ、ジャックポット等）
- [ ] BGM・効果音
- [ ] エクスポート・インポート機能
- [ ] 追加のプレステージアップグレード
- [ ] ボーナスマス種類の拡張

## 開発・ビルド

### 開発環境セットアップ
```bash
# 依存関係のインストール
npm install

# TypeScriptのコンパイル
npm run build

# 開発モード（ファイル監視）
npm run dev
```

### プレイ方法
1. **ビルド実行**: `npm run build` でTypeScriptをコンパイル
2. **ゲーム開始**: ブラウザで `index.html` を開く
3. **開発モード**: ローカルサーバーまたは直接ファイルアクセス

## 遊び方

### 基本的な流れ
1. **ゲーム開始**: ブラウザで `index.html` を開く
2. **手動プレイ**: 「手動ダイス」ボタンで盤面を進む
3. **自動化**: クレジット💰を貯めて自動ダイスを解禁
4. **アップグレード**: ダイスの速度・個数をアップグレード
5. **プレステージ**: レベル50以降で転生してより強力に

### 攻略のコツ
- **序盤**: 手動ダイスでクレジットを稼ぎ、4面ダイス（30💰）を最優先で解禁
- **中盤**: 速度アップグレードで効率を上げ、より高面数のダイスを解禁
- **終盤**: アセンションで個数を増やし、レベル50を目指す
- **転生**: プレステージポイントでクレジット倍率・速度向上を強化
- **ボーナス活用**: プレステージでボーナス確率・倍率をアップグレード
- **長期戦略**: 累積コストを理解し、効率的なアセンション計画を立てる

### デバッグ機能（開発者向け）
- **ローカル環境**: localhost または `?debug=true` パラメータで有効
- **ゲーム制御**: 一時停止、1Tick進行、セーブデータ管理
- **デバッグパネル**: 右下のパネルから各種機能にアクセス

---

*このゲームは放置系インクリメンタルゲームです。自動化機能を活用して効率的に進めましょう！*

## ライセンス

MIT License - 自由にご利用ください。